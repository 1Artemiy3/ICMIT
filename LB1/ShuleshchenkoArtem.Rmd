---
title: 'Лабораторна робота: Intro (R Markdown у RStudio)'
author: "Шулещенко Артем Вадимович"
output:
  html_document:
    toc: true
    df_print: paged
  html_notebook:
    toc: true
    toc_float: true
    highlight: tango
fontsize: 12pt
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE
)
```

## Мета роботи

Ознайомитися з можливостями **RStudio** та **R Markdown** для підготовки динамічних електронних документів, що поєднують текст, формули, код, графіки й таблиці.

## Постановка задачі

Побудувати графік функції:

$$
y(x) = b_0 + b_1 x + b_2 x^2,
\quad x \in [x_1; x_2].
$$

де параметри: $b_0 = 2$, $b_1 = 3$, $b_2 = 1.57$; область визначення задаємо як $x \in [-1;1]$ з кроком $0.1$.

## Виконання завдання (базова графіка)

```{r base-plot}
# Параметри функції
b0 <- 2
b1 <- 3
b2 <- 1.57

# Область визначення
x <- seq(-1, 1, by = 0.1)

# Обчислення значень
y <- b0 + b1 * x + b2 * x^2

# Візуалізація (базова графіка)
plot(
  x, y,
  type = "l",
  col = "red",
  main = "Графік функції y(x)=b0+b1*x+b2*x^2",
  xlab = "x",
  ylab = "y"
)
points(x, y, col = "blue")

# Таблиця даних
df <- data.frame(x = x, y = y)
head(df)
```

## Експорт та імпорт даних

У цьому прикладі дані експортуються у CSV, а потім імпортуються назад із диску.

```{r io-rio}
# install.packages("rio") # за потреби
library(rio)

# Створимо папку data, якщо її ще немає
dir.create("data", showWarnings = FALSE)

# Експорт
export(df, file = "data/data.csv")

# Імпорт
dfNew <- import("data/data.csv")

# Перегляд імпортованих даних
head(dfNew)
```

### Візуалізація таблиці у документі

```{r table, results='asis'}
knitr::kable(
  head(dfNew),
  caption = "_Табл. 1. Фрагмент таблиці даних_"
)
```

## Підсумкова таблиця параметрів

*Табл. 2. Параметри функції*

| Параметр | Значення   |
|----------|------------|
| $b_0$    | `r b0`     |
| $b_1$    | `r b1`     |
| $b_2$    | `r b2`     |
| $x_1$    | `r min(x)` |
| $x_2$    | `r max(x)` |

## Домашнє завдання: ggplot2 + оптимізація коду через `%>%`

1)  Ознайомитися з можливостями пакету `ggplot2`.\
2)  Оптимізувати код з використанням потокового оператора `%>%`.\
3)  Побудувати графік функції засобами `ggplot2`.

```{r ggplot-pipe}
# install.packages(c("ggplot2", "dplyr", "magrittr")) # за потреби
library(ggplot2)
library(dplyr)
library(magrittr)

# Оптимізований пайплайн: формування даних -> побудова графіка
seq(-1, 1, by = 0.1) %>%
  (\(x) data.frame(
    x = x,
    y = b0 + b1 * x + b2 * x^2
  ))() %>%
  ggplot(aes(x = x, y = y)) +
  geom_line() +
  geom_point() +
  labs(
    title = "Графік функції y(x)=b0+b1*x+b2*x^2 (ggplot2)",
    x = "x",
    y = "y"
  ) +
  theme_minimal()
```

## Висновки

У ході лабораторної роботи:

1.  Створено документ **R Markdown** у середовищі **RStudio**, що поєднує теоретичний опис, формули LaTeX та виконуваний код R.
2.  Реалізовано обчислення значень поліноміальної функції та побудову графіка засобами базової графіки R.
3.  Продемонстровано експорт та імпорт даних у форматі **CSV** за допомогою пакету `rio`, а також формування таблиць у звіті через `knitr::kable`.
4.  Виконано оптимізацію коду з використанням потокового оператора `%>%` та побудовано аналогічний графік за допомогою `ggplot2`.
